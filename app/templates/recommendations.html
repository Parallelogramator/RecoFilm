{% extends 'base.html' %}
{% block content %}
<div class="hero">
    <h1>Personalized recommendations</h1>
    <p>Movies selected especially for you</p>
</div>

<div class="limit-selector">
    <label for="limit">Show:</label>
    <select id="limit">
        <option value="10" {% if request.query_params.limit == '10' %}selected{% endif %}>10</option>
        <option value="20" {% if request.query_params.limit == '20' %}selected{% endif %}>20</option>
        <option value="50" {% if request.query_params.limit == '50' %}selected{% endif %}>50</option>
    </select>
</div>

<ul id="movie-list">
    {% for movie in recommendations %}
    <li class="movie-card" data-movie-id="{{ movie.id }}">
        <div class="movie-title">{{ movie.title }}</div>
        <div class="movie-info">
            <div class="movie-year">Year: {{ movie.year or 'unspecified' }}</div>
            <div class="movie-rating">IMDB: {{ movie.rating_imdb or 'unspecified' }}</div>
        </div>
        <div class="movie-genres">
            {% for genre in movie.genres %}
            <span class="genre-tag">{{ genre }}</span>
            {% endfor %}
        </div>
        {% if movie.status %}
        <span class="status-tag status-{{ movie.status.value }}">{{ movie.status.value }}</span>
        {% endif %}
        <div class="movie-description" style="display: none;">{{ movie.description or 'No description' }}</div>
    </li>
    {% endfor %}
</ul>
{% if not recommendations %}
<p id="no-movies-message">Recommendations are not yet available.</p>
{% endif %}

<!-- Modal for displaying movie details -->
<div class="modal" id="movieModal">
    <div class="modal-content">
        <span class="modal-close">&times;</span>
        <div class="modal-body">
            <!-- Movie details will be injected here by JavaScript -->
        </div>
    </div>
</div>
{% endblock %}